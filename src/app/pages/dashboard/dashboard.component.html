<app-main-container>

  <app-page-header page-name="Dashboard" page-description="Visão geral das suas finanças"></app-page-header>
  <app-summary-cards-container>
     <app-summary-card color="blue" label-text="Saldo total das contas" material-icon-name="payment" [amount]="currentTotalBalance"></app-summary-card>

    <app-summary-card color="green" label-text="Total Receitas" material-icon-name="attach_money" [amount]="totalAmountIn"></app-summary-card>

    <app-summary-card color="green" label-text="Total Despesas" material-icon-name="warning" [amount]="totalAmountOut" color="red"></app-summary-card>

  </app-summary-cards-container>

  <div class="dashboard-content">
    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Gastos por Categoria</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-container">
          <ngx-charts-pie-chart
            [results]="categories"
            [view]="[400, 300]"
            [legend]="false"
            [labels]="true"
            [doughnut]="true"
            [arcWidth]="0.4"
            [gradient]="false"
            [tooltipDisabled]="false">
          </ngx-charts-pie-chart>
        </div>
        <div class="chart-legend">
          <div class="legend-item" *ngFor="let item of categories">
            <div class="legend-color" ></div>
            <span class="legend-name">{{ item.name }}</span>
            <span class="legend-value">{{ formatCurrency(item.value) }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Recent Accounts Section -->
    <mat-card class="recent-accounts-card">
      <mat-card-header>
        <mat-card-title>Despesas a vencer no próximo mês</mat-card-title>
        <mat-card-subtitle>
          <!-- <button color="primary" (click)="onViewAllAccounts()">Ver todas</button> -->
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <div class="accounts-list">
          <div class="account-item" *ngFor="let account of recentAccounts">
            <div class="account-info">
              <h4>{{ account.description }}</h4>
              <p>{{ account.category.name }} • Vencimento em {{ formatDate(account.expirationDate) }}</p>
            </div>
            <div class="account-details">
              <p class="account-amount">{{ formatCurrency(account.amount) }}</p>
              <!-- <mat-chip
                [style.background-color]="getStatusColor(account.status)"
                class="status-chip">
                {{ getStatusText(account.status) }}
              </mat-chip> -->
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</app-main-container>
