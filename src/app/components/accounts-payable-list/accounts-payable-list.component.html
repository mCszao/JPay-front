<div class="list-card">
  <div class="list-header">
    <span>Descrição</span>
    <span>Categoria</span>
    <span>Vencimento</span>
    <span>Valor</span>
    <span>Status</span>
    <span>Tipo</span>
    <span class="actions-col">Ações</span>
  </div>

  @if (items.length) {
    <div class="list-body">
      @for (ap of items; track ap.id) {
        <div class="list-row">
          <span class="cell-strong">{{ ap.description }}</span>
          <span class="cell-muted">{{ ap.category.name }}</span>
          <span>{{ ap.expirationDate | date: 'dd/MM/yyyy' }}</span>
          <span class="cell-strong">R$ {{ ap.amount | number: '1.2-2' }}</span>
          <span>
            <span class="chip"
              [class.chip-green]="ap.status === 'PAID'"
              [class.chip-yellow]="ap.status === 'PENDING'"
              >
              {{ ap.status === "PAID" ? (ap.type === "ATIVO" ? "RECEBIDO" : "PAGO") : "PENDENTE" }}
            </span>
          </span>
          <span class="cell-strong">{{ap.type}}</span>
          <div class="row-actions">
            <button class="btn"
             [attr.aria-label]="ap.status === 'PAID' ? 'Marcar como pendente' : 'Marcar como pago'"
             [class.btn-danger]="ap.status === 'PAID'"
             [class.btn-ok]="ap.status === 'PENDING'"
             (click)="toggleStatus.emit(ap)">
            @if (ap.status === "PAID") {
                <mat-icon>arrow_back</mat-icon>
                <mat-icon>payment</mat-icon>
            } @else {
              <mat-icon>payment</mat-icon>
            }
            </button>
            @if(ap.status === "PENDING") {
              <button class="btn ghost" (click)="edit.emit(ap)">
                <mat-icon>
                  edit
                </mat-icon>
              </button>
            }
            <button class="btn danger" (click)="remove.emit(ap)">
              <mat-icon>
                delete_forever
              </mat-icon>
            </button>
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="empty"><p>Nenhuma conta a pagar encontrada.</p></div>
  }
</div>
